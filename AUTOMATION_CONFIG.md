# ADHD Research Database - Automation Configuration

## Repository Information

**Repository URL:** https://github.com/vbonk/adhd-research-database.git
**Repository Owner:** vbonk
**Repository Name:** adhd-research-database
**Default Branch:** main
**Project Directory:** /home/ubuntu/add_research_project

## Git Configuration

### Authentication
- **Method:** GitHub Personal Access Token (PAT)
- **Token Variable:** $GH_TOKEN (already configured in environment)
- **Username:** vbonk
- **Email:** research-bot@adhddb.com

### Git Setup Commands
```bash
cd /home/ubuntu/add_research_project
git config user.name "ADHD Research Bot"
git config user.email "research-bot@adhddb.com"
git config credential.helper store
echo "https://vbonk:$GH_TOKEN@github.com" > ~/.git-credentials
```

## Branch Strategy

### For Automated Updates
1. **Always start from main branch**
   ```bash
   git checkout main
   git pull origin main
   ```

2. **Create feature branch for updates**
   - Branch naming: `research-update-YYYY-MM-DD`
   - Example: `research-update-2025-01-15`
   ```bash
   git checkout -b research-update-$(date +%Y-%m-%d)
   ```

3. **Push and create PR**
   ```bash
   git push origin research-update-$(date +%Y-%m-%d)
   gh pr create --title "Weekly ADHD Research Update - $(date +%Y-%m-%d)" --body "Automated research update"
   ```

## File Update Workflow

### Files to Update and Commit
1. **Knowledge Base**
   - `/home/ubuntu/add_research_project/knowledge_base/knowledge_base.json`
   - Primary research data storage

2. **Assessment Framework**
   - `/home/ubuntu/add_research_project/frameworks/assessment_framework.md`
   - Generated by `generate_framework.py`

3. **Treatment Decision Tree**
   - `/home/ubuntu/add_research_project/frameworks/treatment_decision_tree.md`
   - `/home/ubuntu/add_research_project/frameworks/treatment_decision_tree.png`
   - Generated by `generate_decision_tree.py`

4. **Database Migration Results**
   - Run `node migrate_data.js` after updating knowledge_base.json
   - Commit any migration logs or status files

5. **Documentation Updates**
   - Update README.md with new research count
   - Update DATABASE_DOCUMENTATION.md if schema changes

### Commit Message Template
```
Weekly ADHD research update - YYYY-MM-DD

üìä Research Updates:
- Added [X] new high-quality research entries
- Updated knowledge base with latest evidence-based findings
- Regenerated assessment framework and treatment decision tree
- Updated database with new research data

üî¨ Research Summary:
[Brief summary of new findings and their clinical significance]

üè• Clinical Impact:
- Enhanced evidence base for professional men aged 25-55
- Updated treatment recommendations based on latest research
- Improved assessment tools with current best practices

üìà Database Statistics:
- Total research entries: [X]
- Evidence levels: Maintained high-quality standards (1A-2B)
- Target population focus: Professional adults 25-55

ü§ñ Automated update via scheduled research pipeline
```

## Automated Workflow Steps

### 1. Research Discovery and Evaluation
```bash
# Search for latest research
# Use omni_search with queries:
# - "adult ADHD systematic review meta-analysis RCT 2025"
# - "ADHD professional men workplace treatment"
# - "ADHD pharmacological psychological intervention"

# Quality criteria:
# - Evidence levels 1A (systematic reviews) or 1B (RCTs)
# - Target population: ages 25-55, working professionals
# - Published within last 7 days
```

### 2. Knowledge Base Update
```bash
# Update knowledge_base.json following established schema
# Required fields for each entry:
# - title, authors, journal, DOI, publication_date
# - evidence_level, study_type, sample_size
# - target_population, methodology, key_findings
# - clinical_significance, workplace_relevance
# - quality_assessment, effect_sizes
```

### 3. Framework Regeneration
```bash
cd /home/ubuntu/add_research_project
python generate_framework.py
python generate_decision_tree.py
manus-render-diagram frameworks/treatment_decision_tree.md frameworks/treatment_decision_tree.png
```

### 4. Database Migration
```bash
cd /home/ubuntu/add_research_project
node migrate_data.js
```

### 5. Git Operations
```bash
# Setup
git checkout main
git pull origin main
BRANCH_NAME="research-update-$(date +%Y-%m-%d)"
git checkout -b $BRANCH_NAME

# Stage changes
git add knowledge_base/knowledge_base.json
git add frameworks/
git add README.md
git add DATABASE_DOCUMENTATION.md

# Commit with detailed message
git commit -m "Weekly ADHD research update - $(date +%Y-%m-%d)

üìä Research Updates:
- Added [X] new high-quality research entries
- Updated knowledge base with latest evidence-based findings
- Regenerated assessment framework and treatment decision tree
- Updated database with new research data

üî¨ Research Summary:
[Summary of findings]

üè• Clinical Impact:
- Enhanced evidence base for professional men aged 25-55
- Updated treatment recommendations based on latest research

ü§ñ Automated update via scheduled research pipeline"

# Push and create PR
git push origin $BRANCH_NAME
gh pr create \
  --title "Weekly ADHD Research Update - $(date +%Y-%m-%d)" \
  --body "Automated weekly update with latest ADHD research findings. Includes updated knowledge base, regenerated frameworks, and database migration." \
  --base main \
  --head $BRANCH_NAME
```

## Error Handling

### Common Issues and Solutions

1. **No new research found**
   - Create informational commit noting search performed
   - Update last_search_date in knowledge base metadata

2. **Git authentication failures**
   - Verify GH_TOKEN is set: `echo $GH_TOKEN`
   - Re-setup credentials if needed

3. **Merge conflicts**
   - Pull latest main branch
   - Resolve conflicts manually
   - Continue with automated process

4. **Database migration failures**
   - Check PostgreSQL service status
   - Verify database connectivity
   - Rollback knowledge_base.json if needed

### Validation Checklist

Before committing, verify:
- [ ] knowledge_base.json is valid JSON
- [ ] All new entries have required fields
- [ ] Evidence levels are appropriate (1A-2B)
- [ ] Target population matches criteria (25-55, professional)
- [ ] Assessment framework generated successfully
- [ ] Treatment decision tree rendered properly
- [ ] Database migration completed without errors
- [ ] README statistics updated
- [ ] All files staged for commit

## Success Metrics

Track these metrics for each automated update:
- Number of new research entries added
- Evidence level distribution
- Target population alignment percentage
- Clinical significance scores
- Workplace relevance ratings
- Database migration success rate
- Git operation success rate

## Manual Override

If manual intervention is needed:
1. Stop the automated process
2. Review the current state in `/home/ubuntu/add_research_project`
3. Make necessary corrections
4. Resume from the appropriate step in the workflow
5. Document any issues for future automation improvements

This configuration ensures the automated research update system has all necessary information to operate independently without requiring user input.

